<?xml version="1.0" encoding="utf-8" ?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

	<ItemGroup Condition="'$(SKCopyAssets)'=='True'">
		<None Remove="$(SKAssetFolder)/**"/>

		<SKContent Include="$(SKAssetFolder)/**">
			<Link>$(SKAssetDestination)/%(RecursiveDir)%(Filename)%(Extension)</Link>
		</SKContent>

		<AndroidAsset Include="$(SKAssetFolder)/**">
			<CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
			<Link>%(RecursiveDir)%(Filename)%(Extension)</Link>
		</AndroidAsset>
	</ItemGroup>

	<Target Name="StereoKitCopy" Condition="'$(SKCopyAssets)'=='True'" AfterTargets="StereoKitProperties" BeforeTargets="AssignTargetPaths">
		<Message 
			Condition  = "'$(UseMaui)' != 'true' or ('$(UseMaui)' == 'true' and ('$(SKBuildPlatform)'=='Desktop' or '$(SKBuildPlatform)'=='CoreWindows'))"
			Importance = "high"
			Text       = "[StereoKit NuGet] Copying assets folder $SKAssetFolder:$(SKAssetFolder)"/>
		
		<Copy
			Condition          = "'$(UseMaui)' != 'true' or ('$(UseMaui)' == 'true' and ('$(SKBuildPlatform)'=='Desktop' or '$(SKBuildPlatform)'=='CoreWindows'))"
			SourceFiles        = "@(SKContent)"
			DestinationFiles   = "$(OutDir)/%(SKContent.Link)"
			SkipUnchangedFiles = "true">
		</Copy>
	</Target>
</Project>